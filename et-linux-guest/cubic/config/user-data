#cloud-config
autoinstall:
  version: 1

  locale: en_US
  keyboard:
    layout: us

  timezone: America/New_York

  identity:
    hostname: et
    username: kiosk
    password: "$6$0EraBMbmnk1tS7.M$82SAIfpf4D/WBVOK2vUjyhCm6MCpGZioypTuro1KpREPDHSQi/HNT7z3E8Z/VRNYYxfjKxNinUz5THFdugkul1"

  storage:
    layout:
      name: direct

  late-commands:
    # Set root password (password: root) - allows "su - root" or TTY login
    - curtin in-target -- bash -c "echo 'root:root' | chpasswd"
    
    # Run installation script directly from /opt/install-resources (already on ISO)
    - curtin in-target -- bash /opt/install-resources/install_guest.sh 2>&1 | tee /target/opt/install.log